(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,n){},202:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(26),s=n.n(r),o=n(28),i=n(29),l=n(8),u=n.n(l),j=n(16),d=n(15),b=n(125),p="http://localhost:5000/api",O=n.n(b).a.create({baseURL:p}),h=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/register",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t){if(window.localStorage.getItem("auth")){var n=JSON.parse(localStorage.getItem("auth"));n.user=e,localStorage.setItem("auth",JSON.stringify(n)),t()}},x=n(2),v=function(e){var t=e.label,n=e.type,a=e.value,c=e.placeholder,r=e.autoComplete,s=e.icon,o=e.id,i=e.onHandleChange;return Object(x.jsx)("form",{className:"mt-3",children:Object(x.jsxs)("div",{className:"form-group mb-3",children:[Object(x.jsx)("label",{className:"form-label",children:t}),Object(x.jsxs)("div",{className:s&&"password",children:[Object(x.jsx)("input",{type:n,className:o?"input":"form-control",placeholder:c,onChange:i,value:a,autoComplete:r}),"input"===o&&s]})]})})},g=n(23),N=n(13),y=function(e){var t=Object(g.b)(),n=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,c=Object(i.g)(),r=Object(a.useState)(!1),s=Object(d.a)(r,2);s[0],s[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"nav bg-light d-flex justify-content-between align-items-center",children:[Object(x.jsx)(o.b,{className:"nav-link",to:"/",children:"Home"}),Object(x.jsxs)("div",{className:"d-flex rightBar_menu",children:[null!==n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.b,{className:"nav-link",to:"/dashboard",children:"Dashboard"}),Object(x.jsx)(o.b,{className:"nav-link pointer",onClick:function(){t({type:"LOGOUT",payload:null}),window.localStorage.clear(),c.push("/login")},children:"logout"})]}),null===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.b,{className:"nav-link",to:"/login",children:"Login"}),Object(x.jsx)(o.b,{className:"nav-link",to:"/register",children:"Register"})]})]})]}),e.children]})},w=n(32),S=n(72),_=n.n(S),E=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(""),i=Object(d.a)(o,2),l=i[0],b=i[1],p=Object(a.useState)(!1),O=Object(d.a)(p,2),h=O[0],f=O[1],N=Object(g.b)(),S=function(){var e=Object(j.a)(u.a.mark((function e(n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),f(!0),a={email:r,password:l},e.prev=3,e.next=6,m(a);case 6:200===(c=e.sent).status&&(window.localStorage.setItem("auth",JSON.stringify(c.data)),N({type:"USER_LOGGEDIN",payload:c.data}),t.push("/dashboard")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),400===e.t0.response.status&&w.b.error(e.t0.response.data),f(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:"Login"})}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(x.jsx)(v,{type:"email",label:"Email",className:"form-control",placeholder:"Enter Email",onHandleChange:function(e){return s(e.target.value)},value:r,autoComplete:"on"}),Object(x.jsx)(v,{type:"password",label:"Password",className:"form-control",placeholder:"Enter Password",onHandleChange:function(e){return b(e.target.value)},value:l}),Object(x.jsx)("button",{className:"btn btn-primary px-5",type:"submit",disabled:!r||!l,onClick:S,children:h?Object(x.jsx)(_.a,{type:"Puff",color:"#00BFFF",height:20,width:20}):"Submit"})]})})})]})},k=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(""),i=Object(d.a)(o,2),l=i[0],b=i[1],p=Object(a.useState)(""),O=Object(d.a)(p,2),m=O[0],f=O[1],g=Object(a.useState)(""),N=Object(d.a)(g,2),S=(N[0],N[1],function(){var e=Object(j.a)(u.a.mark((function e(n){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={name:r,email:l,password:m},e.prev=2,e.next=5,h(a);case 5:c=e.sent,w.b.success(c.data.message),t.push("/login"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),400===e.t0.response.status&&w.b.error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}());return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:"Register"})}),Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(x.jsx)(v,{type:"text",label:"Your Name",placeholder:"Enter name",value:r,onHandleChange:function(e){return s(e.target.value)},autoComplete:"on"}),Object(x.jsx)(v,{type:"email",label:"Email",placeholder:"Enter Email",value:l,onHandleChange:function(e){return b(e.target.value)},autoComplete:"on"}),Object(x.jsx)(v,{type:"password",label:"Password",placeholder:"Enter Password",value:m,onHandleChange:function(e){return f(e.target.value)}}),Object(x.jsx)("button",{className:"btn btn-primary px-5",type:"submit",disabled:!r||!l||!m,onClick:S,children:"Submit"})]})})})]})},C=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/create-hotel",n,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/hotels");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.delete("/delete-hotel/".concat(n),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/seller-hotel",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/hotel-details/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.put("/update/hotel/".concat(a),n,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/user-hotel-booking",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("/search-listings",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e,t){var n=new Date(e),a=new Date(t);return Math.round(Math.abs(n-a)/864e5)},H=n(211),F=n(212),K=function(e){var t=e.hotel,n=e.seller,c=void 0!==n&&n,r=e.showMoreButton,s=void 0===r||r,l=e.handleHotelDelete,u=void 0===l?function(e){return e}:l,j=(Object(g.c)((function(e){return Object(N.a)({},e)})).auth,Object(a.useState)("")),b=Object(d.a)(j,2),O=b[0],h=b[1],m=Object(i.g)();Object(a.useEffect)((function(){h("".concat(p,"/hotel/image/").concat(t._id))}));var f;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"card mb-3",children:Object(x.jsxs)("div",{className:"row no-gutters",children:[Object(x.jsx)("div",{className:"col-md-4",children:t.image&&t.image.contentType?Object(x.jsx)("img",{src:O,alt:"no img",className:"card-image img img-fluid"}):Object(x.jsx)(_.a,{type:"Puff",color:"Blue",height:50,width:50})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("h3",{className:"card-title",children:[t.title," ",Object(x.jsx)("span",{className:"text-primary",children:(f={amount:t.price,currency:"Inr"},f.amount.toLocaleString(f.currency,{style:"currency",currency:f.currency}))})]}),Object(x.jsx)("p",{className:"alert alert-info",children:t.location}),Object(x.jsx)("p",{className:"card-text",children:"".concat(t.content.substring(1,100),"...")}),Object(x.jsx)("p",{className:"card-text",children:Object(x.jsxs)("span",{className:"text-primary",children:["for ",B(t.from,t.to)," ",B(t.from,t.to)>=1?"day":"days"]})}),Object(x.jsxs)("p",{className:"card-text",children:["Bed ",t.bed]}),Object(x.jsxs)("p",{className:"card-text",children:["Available from ",new Date(t.from).toLocaleDateString()]}),Object(x.jsxs)("div",{className:"d-flex justify-content-between h4",children:[s&&Object(x.jsx)("button",{onClick:function(){return m.push("/hotel/".concat(t._id))},className:"btn btn-primary",children:"Show more"}),c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.b,{to:"/hotel/edit/".concat(t._id),children:Object(x.jsx)(H.a,{className:"text-warning"})}),Object(x.jsx)(F.a,{className:"text-danger",onClick:function(){return u(t._id)}})]})]})]})})]})})})},Y=n(207),U=n(205),W=n(139),M=n(75),G=n.n(M),V=n(27),z=n.n(V),J=Y.a.Option,q=U.a.RangePicker,Q={appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_ID,apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_API_KEY,language:"en"},X=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(d.a)(r,2),o=s[0],l=s[1],b=Object(a.useState)(""),p=Object(d.a)(b,2),O=p[0],h=p[1],m=Object(i.g)(),f=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||o||O){e.next=2;break}return e.abrupt("return");case 2:m.push("/search-result?location=".concat(n,"&date=").concat(o,"&bed=").concat(O));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"d-flex pb-4 search_bar",children:[Object(x.jsx)("div",{className:"w-100",children:Object(x.jsx)(G.a,{placeholder:"Where you want to go?",defaultValue:n,Option:Q,onChange:function(e){var t=e.suggestion;return c(t.value)},style:{height:"50px"}})}),Object(x.jsx)(q,{className:"w-100 rangePicker",onChange:function(e,t){return l(t)},disabledDate:function(e){return e&&e.valueOf()<z()().subtract(1,"days")}}),Object(x.jsxs)(Y.a,{onChange:function(e){return h(e)},className:"w-100",size:"large",placeholder:"Number of beds",children:[Object(x.jsx)(J,{children:1},1),Object(x.jsx)(J,{children:2},2),Object(x.jsx)(J,{children:3},3),Object(x.jsx)(J,{children:4},4)]}),Object(x.jsx)(W.a,{className:"btn btn-primary p-3 btn-square",onClick:f})]})},Z=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){r()}),[]);var r=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:t=e.sent,c(t.data.hotels);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:"All Hotels"})}),Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)(X,{})]}),Object(x.jsx)("div",{className:"container-fluid mt-2",children:n.map((function(e,t){return Object(x.jsx)(K,{hotel:e},t)}))})]})},$=(n(186),n(123),n(138)),ee=function(e){var t=e.component,n=Object($.a)(e,["component"]);return Object(x.jsx)(i.b,Object(N.a)(Object(N.a)({},n),{},{component:function(e){return window.localStorage.getItem("auth")?Object(x.jsx)(t,Object(N.a)({},e)):Object(x.jsx)(i.a,{to:"/login"})}}))},te=n(206),ne=n(210),ae=n(208),ce=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/create-connect-account",{},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/get-account-status",{},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/get-account-balance",{},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/stripe-session-id",{hotelId:n},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post("/stripe-success",{hotelId:n},{headers:{Authorization:"Bearer ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=te.a.Meta,ue=ne.a.Ribbon,je=function(){var e=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,t=e.user,n=Object(a.useState)(0),c=Object(d.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(!1),i=Object(d.a)(o,2);i[0],i[1];Object(a.useEffect)((function(){se(e.token).then((function(e){s(e.data)}))}),[]);return Object(x.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(x.jsx)(te.a,{children:Object(x.jsx)(le,{avatar:Object(x.jsx)(ae.a,{children:t.name[0]}),title:t.name,description:"Joined ".concat(z()(t.createdAt).fromNow())})}),e&&e.user&&e.user.stripe_seller&&e.user.stripe_seller.charges_enabled&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ue,{text:"Available",color:"grey",children:Object(x.jsx)(te.a,{className:"bg-light pt-1",children:r&&r.pending&&r.pending.map((function(e,t){return Object(x.jsx)("span",{className:"lead",children:(n=e,(n.amount/100).toLocaleString(n.currency,{style:"currency",currency:n.currency}))},t);var n}))})})})]})},de=function(){var e=window.location.pathname;return Object(x.jsxs)("ul",{className:"nav nav-tabs",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(o.b,{className:"nav-link ".concat("/dashboard"===e&&"active"),to:"/dashboard",children:"Your Bookings"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(o.b,{className:"nav-link ".concat("/dashboard/seller"===e&&"active"),to:"/dashboard/seller",children:"Your Hotels"})})]})},be=n(209),pe=function(e){var t=e.session,n=e.orderdBy,a=e.showModal,c=e.setShowModal;return Object(x.jsxs)(be.a,{visible:a,title:"Order Payment info",onCancel:function(){return c(!a)},children:[Object(x.jsxs)("p",{children:["Payment intent: ",t.payment_intent]}),Object(x.jsxs)("p",{children:["Payment status: ",t.payment_status]}),Object(x.jsxs)("p",{children:["Amount total: ",t.currency.toUpperCase()," ",t.amount_total/100]}),Object(x.jsxs)("p",{children:["Stripe customer: ",t.customer]}),Object(x.jsxs)("p",{children:["Customer: ",n.name]})]})},Oe=function(e){var t=e.hotel,n=e.session,c=e.orderdBy,r=(Object(g.c)((function(e){return Object(N.a)({},e)})).auth,Object(a.useState)("")),s=Object(d.a)(r,2),o=s[0],l=s[1],u=Object(a.useState)(!1),j=Object(d.a)(u,2),b=j[0],O=j[1];Object(i.g)();Object(a.useEffect)((function(){l("".concat(p,"/hotel/image/").concat(t._id))}));var h;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"card mb-3",children:Object(x.jsxs)("div",{className:"row no-gutters",children:[Object(x.jsx)("div",{className:"col-md-4",children:t.image&&t.image.contentType?Object(x.jsx)("img",{src:o,alt:"no img",className:"card-image img img-fluid"}):Object(x.jsx)(_.a,{type:"Puff",color:"Blue",height:50,width:50})}),Object(x.jsx)("div",{className:"col-md-8",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("h3",{className:"card-title",children:[t.title," ",Object(x.jsx)("span",{className:"text-primary",children:(h={amount:t.price,currency:"Inr"},h.amount.toLocaleString(h.currency,{style:"currency",currency:h.currency}))})]}),Object(x.jsx)("p",{className:"alert alert-info",children:t.location}),Object(x.jsx)("p",{className:"card-text",children:"".concat(t.content.substring(1,100),"...")}),Object(x.jsx)("p",{className:"card-text",children:Object(x.jsxs)("span",{className:"text-primary",children:["for ",B(t.from,t.to)," ",B(t.from,t.to)<=1?"day":"days"]})}),Object(x.jsxs)("p",{className:"card-text",children:["Bed ",t.bed]}),Object(x.jsxs)("p",{className:"card-text",children:["Available from ",new Date(t.from).toLocaleDateString()]}),b&&Object(x.jsx)(pe,{session:n,orderdBy:c,showModal:b,setShowModal:O}),Object(x.jsx)("div",{className:"d-flex justify-content-between h4",children:Object(x.jsx)("button",{onClick:function(){return O(!b)},className:"btn btn-primary",children:"Show Payment info"})})]})})]})})})},he=function(){var e=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){s()}),[]);var s=function(){var t=Object(j.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e.token);case 2:n=t.sent,r(n.data.booking);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"container-fluid bg-secondary p-5 text-center",children:Object(x.jsx)(je,{})}),Object(x.jsx)("div",{className:"container-fluid p-4",children:Object(x.jsx)(de,{})}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-10",children:Object(x.jsx)("h2",{children:"Your Bookings"})}),Object(x.jsx)("div",{className:"col-md-2",children:Object(x.jsx)(o.b,{to:"/",className:"btn btn-primary",children:"Browse Hotels"})})]})}),Object(x.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(x.jsx)(Oe,{hotel:e.hotel,session:e.session,orderdBy:e.orderedBy},t)}))})]})},me=n(213),fe=function(){var e=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,t=Object(a.useState)(!1),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(d.a)(s,2),l=i[0],b=i[1];Object(a.useEffect)((function(){p()}),[]);var p=function(){var t=Object(j.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e.token);case 2:n=t.sent,b(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(j.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,ce(e.token);case 4:n=t.sent,window.location.href=n.data,r(!1),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),w.b.error("Stripe connect failed, Try again."),r(!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(j.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,A(e.token,n).then((function(e){w.b.success("Hotel deleted"),p()}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"container-fluid bg-secondary p-5 text-center",children:Object(x.jsx)(je,{})}),Object(x.jsx)("div",{className:"container-fluid py-4",children:Object(x.jsx)(de,{})}),e&&e.user&&e.user.stripe_seller&&e.user.stripe_seller.charges_enabled?Object(x.jsxs)("div",{className:"container-fluid",children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-10",children:Object(x.jsx)("h2",{children:"Hotels"})}),Object(x.jsx)("div",{className:"col-md-2",children:Object(x.jsx)(o.b,{to:"/hotels/new",className:"btn btn-primary",children:"+ Add new"})})]}),Object(x.jsx)("div",{className:"row",children:l.map((function(e,t){return Object(x.jsx)(K,{hotel:e,showMoreButton:!1,seller:!0,handleHotelDelete:h},t)}))})]}):Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsxs)("div",{className:"col-md-6 offset-md-3 text-center",children:[Object(x.jsxs)("div",{className:"p-4 pointer",children:[Object(x.jsx)(me.a,{className:"h1"}),Object(x.jsx)("h4",{children:"Setup payouts to post hotel rooms"}),Object(x.jsx)("p",{className:"lead",children:"partners with stripe to transfer earnings to Your bank account"})]}),Object(x.jsx)("button",{disabled:c,className:"btn btn-primary mb-3",onClick:O,children:c?"Processing...":"Setup Payouts"}),Object(x.jsx)("p",{className:"text-muted",children:Object(x.jsx)("small",{children:"You'll be redirected to Stripe to complete the onboarding process"})})]})})})]})},xe=n(71),ve=Y.a.Option,ge={appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_ID,apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_API_KEY,language:"en"},Ne=function(){var e=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,t=Object(a.useState)({title:"",content:"",image:"",price:"",from:"",to:"",bed:""}),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],b=Object(a.useState)("https://via.placeholder.com/150.png?text=PREVIEW"),p=Object(d.a)(b,2),O=p[0],h=p[1],m=c.title,f=c.content,v=c.image,S=c.price,_=c.from,E=c.bed,k=c.to,T=function(){var t=Object(j.a)(u.a.mark((function t(n){var a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(a=new FormData).append("title",m),a.append("content",f),a.append("price",S),a.append("from",_),a.append("to",k),a.append("bed",E),a.append("location",i),v&&a.append("image",v),t.prev=10,t.next=13,C(e.token,a);case 13:c=t.sent,console.log(c),w.b.success("New hotel is posted"),setTimeout((function(){window.location.reload()}),1e3),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(10),400===t.t0.response.status&&w.b.error(t.t0.response.data);case 22:case"end":return t.stop()}}),t,null,[[10,19]])})));return function(e){return t.apply(this,arguments)}}(),A=function(e){r(Object(N.a)(Object(N.a)({},c),{},{image:e.target.files[0]})),h(URL.createObjectURL(e.target.files[0]))},D=function(e){r(Object(N.a)(Object(N.a)({},c),{},Object(xe.a)({},e.target.name,e.target.value)))};return Object(x.jsx)(y,{children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:"Add New Hotel"})}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-10",children:Object(x.jsxs)("form",{onSubmit:T,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{className:"btn btn-outline-secondary m-2 text-left",children:["Image",Object(x.jsx)("input",{type:"file",name:"image",accept:"image/*",hidden:!0,onChange:A})]}),Object(x.jsx)("input",{type:"text",name:"title",placeholder:"Title",className:"form-control m-2",value:m,onChange:D}),Object(x.jsx)("textarea",{name:"content",placeholder:"Content",className:"form-control m-2",value:f,onChange:D}),Object(x.jsx)(G.a,{className:"form-control ml-2 mr-2",placeholder:"Location",defaultValue:i,option:ge,onChange:function(e){var t=e.suggestion;return l(t.value)}}),Object(x.jsx)("input",{type:"number",name:"price",placeholder:"Price",className:"form-control m-2",value:S,onChange:D}),Object(x.jsxs)(Y.a,{onChange:function(e){return r(Object(N.a)(Object(N.a)({},c),{},{bed:e}))},className:"w-100 m-2",size:"large",placeholder:"No of Beds",children:[Object(x.jsx)(ve,{children:1},1),Object(x.jsx)(ve,{children:2},2),Object(x.jsx)(ve,{children:3},3),Object(x.jsx)(ve,{children:4},4)]})]}),Object(x.jsx)(U.a,{placeholder:"From date",className:"form-control m-2",onChange:function(e,t){return r(Object(N.a)(Object(N.a)({},c),{},{from:t}))},disabledDate:function(e){return e&&e.valueOf()<z()().subtract(1,"days")}}),Object(x.jsx)(U.a,{placeholder:"To date",className:"form-control m-2",onChange:function(e,t){return r(Object(N.a)(Object(N.a)({},c),{},{to:t}))},disabledDate:function(e){return e&&e.valueOf()<z()().subtract(1,"days")}}),Object(x.jsx)("button",{className:"btn btn-outline-primary m-2",type:"submit",children:"Save"})]})}),Object(x.jsx)("div",{className:"col-md-2",children:Object(x.jsx)("img",{src:O,alt:"preview_image",className:"img img-fluid m-2"})})]})})]})})},ye=n(68),we=function(e){e.history;var t=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,n=Object(g.b)();Object(a.useEffect)((function(){t&&t.token&&c()}),[t]);var c=function(){var e=Object(j.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re(t.token);case 3:a=e.sent,f(a.data,(function(){n({type:"USER_LOGGEDIN",payload:a.data})})),window.location.href="/dashboard/seller",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(y,{children:Object(x.jsx)("div",{className:"d-flex justify-content-center p-5",children:Object(x.jsx)(ye.a,{className:"h1 p-5 text-danger"})})})},Se=Y.a.Option,_e={appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_ID,apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALGOLIA_API_KEY,language:"en"},Ee=function(e){var t=e.match,n=Object(g.c)((function(e){return Object(N.a)({},e)})).auth,c=Object(a.useState)({title:"",content:"",price:"",from:"",to:"",bed:"",location:""}),r=Object(d.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)("https://via.placeholder.com/100.png?text=PREVIEW"),l=Object(d.a)(i,2),b=l[0],O=l[1],h=Object(a.useState)(""),m=Object(d.a)(h,2),f=m[0],v=m[1],S=s.title,_=s.content,E=s.price,k=s.location,C=s.from,T=s.bed,A=s.to;Object(a.useEffect)((function(){D()}),[]);var D=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.params.hotelId);case 2:n=e.sent,o(Object(N.a)(Object(N.a)({},s),n.data)),O("".concat(p,"/hotel/image/").concat(n.data._id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){v(e.target.files[0]),O(URL.createObjectURL(e.target.files[0]))},L=function(e){o(Object(N.a)(Object(N.a)({},s),{},Object(xe.a)({},e.target.name,e.target.value)))},B=function(){var e=Object(j.a)(u.a.mark((function e(a){var c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(c=new FormData).append("title",S),c.append("content",_),c.append("price",E),c.append("from",C),c.append("to",A),c.append("bed",T),c.append("location",k),f&&c.append("image",f),e.prev=10,e.next=13,I(n.token,c,t.params.hotelId);case 13:r=e.sent,s=r.data,w.b.success("".concat(s.title," is updated...")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),w.b.error(e.t0.response.data);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(y,{children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:"Edit Hotel"})}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-9",children:Object(x.jsxs)("form",{onSubmit:B,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{className:"btn btn-outline-secondary m-2 text-left",children:["Image",Object(x.jsx)("input",{type:"file",name:"image",accept:"image/*",hidden:!0,onChange:R})]}),Object(x.jsx)("input",{type:"text",name:"title",placeholder:"Title",className:"form-control m-2",value:S,onChange:L}),Object(x.jsx)("textarea",{name:"content",placeholder:"Content",className:"form-control m-2",value:_,onChange:L}),k&&k.length>0&&Object(x.jsx)(G.a,{className:"form-control ml-2 mr-2",placeholder:"Location",defaultValue:k,option:_e,onChange:function(e){var t=e.suggestion;return o(Object(N.a)(Object(N.a)({},s),{},{location:t.value}))}}),Object(x.jsx)("input",{type:"number",name:"price",placeholder:"Price",className:"form-control m-2",value:E,onChange:L}),Object(x.jsxs)(Y.a,{onChange:function(e){return o(Object(N.a)(Object(N.a)({},s),{},{bed:e}))},className:"w-100 m-2",size:"large",value:T,placeholder:"No of Beds",children:[Object(x.jsx)(Se,{children:1},1),Object(x.jsx)(Se,{children:2},2),Object(x.jsx)(Se,{children:3},3),Object(x.jsx)(Se,{children:4},4)]})]}),C&&Object(x.jsx)(U.a,{defaultValue:z()(C,"YYYY-MM-DD"),placeholder:"From date",className:"form-control m-2",onChange:function(e){return o(Object(N.a)(Object(N.a)({},s),{},{from:e}))},disabledDate:function(e){return e&&e.valueOf()<z()().subtract(1,"days")}}),A&&Object(x.jsx)(U.a,{defaultValue:z()(A,"YYYY-MM-DD"),placeholder:"To date",className:"form-control m-2",onChange:function(e){return o(Object(N.a)(Object(N.a)({},s),{},{to:e}))},disabledDate:function(e){return e&&e.valueOf()<z()().subtract(1,"days")}}),Object(x.jsx)("button",{className:"btn btn-outline-primary m-2",type:"submit",children:"Save"})]})}),Object(x.jsx)("div",{className:"col-md-3",children:Object(x.jsx)("img",{src:b,alt:"preview_image",className:"img img-fluid m-2"})})]})})]})})},ke=n(129),Ce=function(e){var t=e.match,n=e.history,c=Object(a.useState)([]),r=Object(d.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),l=Object(d.a)(i,2),b=l[0],O=l[1],h=Object(a.useState)(!1),m=Object(d.a)(h,2),f=m[0],v=m[1],w=Object(a.useState)(!1),S=Object(d.a)(w,2),_=S[0],E=(S[1],Object(g.c)((function(e){return Object(N.a)({},e)})).auth);Object(a.useEffect)((function(){k()}),[]),Object(a.useEffect)((function(){}),[E,t.params.hotelId]);var k=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.params.hotelId);case 2:n=e.sent,o(n.data),O("".concat(p,"/hotel/image/").concat(t.params.hotelId));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(u.a.mark((function e(a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),E&&E.token){e.next=4;break}return n.push("/login"),e.abrupt("return");case 4:return v(!0),E||n.push("/login"),e.prev=6,e.next=9,oe(E.token,t.params.hotelId);case 9:return c=e.sent,e.next=12,Object(ke.a)("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STRIPE_KEY));case 12:e.sent.redirectToCheckout({sessionId:c.data.sessionId}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),v(!1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"text-center p-4 mt-2 header bg-secondary",children:Object(x.jsx)("h2",{children:s.title})}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-md-6",children:Object(x.jsx)("img",{src:b,alt:s.title,className:"img img-fluid m-2"})}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("br",{}),Object(x.jsx)("b",{children:s.content}),Object(x.jsx)("p",{className:"alert alert-info mt-3",children:s.price}),Object(x.jsx)("p",{className:"card-text",children:Object(x.jsxs)("span",{className:"text-primary",children:["for ",B(s.from,s.to)," ",B(s.from,s.to)<=1?"day":"days"]})}),Object(x.jsxs)("p",{children:["from ",Object(x.jsx)("br",{}),z()(s.from).format("MMMM Do YYYY, h:mm:ss a")]}),Object(x.jsxs)("p",{children:["to ",Object(x.jsx)("br",{}),z()(s.to).format("MMMM Do YYYY, h:mm:ss a")]}),Object(x.jsxs)("i",{children:["Posted by ",Object(x.jsx)("b",{children:s.postedBy&&s.postedBy.name})]}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"btn btn-primary btn-large mt-4",onClick:C,disabled:f||_,children:_?"Already Booked":f?"Loading...":(null===E||void 0===E?void 0:E.token)?"Book Now":"Login to Book"})]})]})})]})},Te=function(e){var t=e.match,n=e.history,c=Object(g.c)((function(e){return Object(N.a)({},e)})).auth;return Object(a.useEffect)((function(){ie(c.token,t.params.hotelId).then((function(e){e.data.success?(console.log(e),n.push("/dashboard")):n.push("/stripe/cancel")}))}),[t.params.hotelId]),Object(x.jsx)(y,{children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"text-center p-5",children:Object(x.jsx)(ye.a,{className:"display-1 text-danger"})})})})},Ae=function(){return Object(x.jsx)(y,{children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"text-center",children:Object(x.jsx)("h1",{children:"Payment failed. Try again..."})})})})},De=n(130),Pe=n.n(De),Ie=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),c=Object(d.a)(n,2),r=(c[0],c[1],Object(a.useState)("")),s=Object(d.a)(r,2),o=(s[0],s[1],Object(a.useState)([])),i=Object(d.a)(o,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){var e=Pe.a.parse(window.location.search),t=e.location,n=e.bed,a=e.date;L({location:t,bed:n,date:a}).then((function(e){u(e.data.result)}))}),[window.location.search]),Object(x.jsxs)(y,{children:[Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row",children:"Search result"})}),Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsx)("pre",{children:JSON.stringify(l,null,4)})})]})};var Re,Le=function(){return Object(x.jsxs)(o.a,{children:[Object(x.jsx)(w.a,{position:"top-center"}),Object(x.jsxs)(i.d,{children:[Object(x.jsx)(i.b,{exact:!0,path:"/",component:Z}),Object(x.jsx)(i.b,{exact:!0,path:"/login",component:E}),Object(x.jsx)(i.b,{exact:!0,path:"/register",component:k}),Object(x.jsx)(i.b,{exact:!0,path:"/hotel/edit/:hotelId",component:Ee}),Object(x.jsx)(i.b,{exact:!0,path:"/hotel/:hotelId",component:Ce}),Object(x.jsx)(i.b,{exact:!0,path:"/search-result",component:Ie}),Object(x.jsx)(ee,{exact:!0,path:"/dashboard",component:he}),Object(x.jsx)(ee,{exact:!0,path:"/dashboard/seller",component:fe}),Object(x.jsx)(ee,{exact:!0,path:"/hotels/new",component:Ne}),Object(x.jsx)(ee,{exact:!0,path:"/stripe/callback",component:we}),Object(x.jsx)(ee,{exact:!0,path:"/stripe/success/:hotelId",component:Te}),Object(x.jsx)(ee,{exact:!0,path:"/stripe/cancel",component:Ae})]})]})},Be=n(131),He=n(80),Fe=n(132);Re=window.localStorage.getItem("auth")?JSON.parse(window.localStorage.getItem("auth")):null;var Ke=Object(He.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGGEDIN":return Object(N.a)(Object(N.a)({},e),t.payload);case"LOGOUT":return t.payload;default:return e}}}),Ye=Object(He.createStore)(Ke,Object(Be.composeWithDevTools)(Object(He.applyMiddleware)(Fe.a)));n(201);s.a.render(Object(x.jsx)(g.a,{store:Ye,children:Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(Le,{})})}),document.getElementById("root"))}},[[202,1,2]]]);
//# sourceMappingURL=main.b966c77e.chunk.js.map